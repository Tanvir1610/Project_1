<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced File Manager - For Life Trading India</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/file-manager.css">
    <link rel="stylesheet" href="css/advanced-features.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="images/logo.png" alt="For Life Trading India" class="logo">
                <h2>File Manager</h2>
            </div>
            <nav class="sidebar-nav">
                <a href="dashboard.html" class="nav-item">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="file-manager.html" class="nav-item">
                    <i class="fas fa-folder"></i>
                    <span>Files</span>
                </a>
                <a href="advanced-file-manager.html" class="nav-item active">
                    <i class="fas fa-cogs"></i>
                    <span>Advanced</span>
                </a>
                <a href="profile.html" class="nav-item">
                    <i class="fas fa-user"></i>
                    <span>Profile</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="content-header">
                <h1>Advanced File Management</h1>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="showBackupModal()">
                        <i class="fas fa-shield-alt"></i>
                        Backup
                    </button>
                    <button class="btn btn-secondary" onclick="showCDNSettings()">
                        <i class="fas fa-globe"></i>
                        CDN
                    </button>
                </div>
            </header>

            <!-- Feature Tabs -->
            <div class="feature-tabs">
                <button class="tab-btn active" data-tab="compression">
                    <i class="fas fa-compress-alt"></i>
                    Compression
                </button>
                <button class="tab-btn" data-tab="sharing">
                    <i class="fas fa-share-alt"></i>
                    Sharing
                </button>
                <button class="tab-btn" data-tab="versioning">
                    <i class="fas fa-history"></i>
                    Versioning
                </button>
                <button class="tab-btn" data-tab="backup">
                    <i class="fas fa-backup"></i>
                    Backup
                </button>
                <button class="tab-btn" data-tab="cdn">
                    <i class="fas fa-cloud"></i>
                    CDN
                </button>
            </div>

            <!-- Compression Tab -->
            <div class="tab-content active" id="compression-tab">
                <div class="feature-section">
                    <h2>Image Compression</h2>
                    <div class="compression-controls">
                        <div class="control-group">
                            <label>Compression Level:</label>
                            <select id="compressionLevel">
                                <option value="low">Low (90% quality)</option>
                                <option value="medium" selected>Medium (80% quality)</option>
                                <option value="high">High (60% quality)</option>
                                <option value="ultra">Ultra (40% quality)</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>Max Width:</label>
                            <input type="number" id="maxWidth" value="1920" min="100" max="4000">
                        </div>
                        <div class="control-group">
                            <label>Max Height:</label>
                            <input type="number" id="maxHeight" value="1080" min="100" max="4000">
                        </div>
                    </div>

                    <div class="upload-zone" id="compressionUpload">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Drop images here for compression</p>
                        <input type="file" multiple accept="image/*" id="compressionFiles">
                    </div>

                    <div class="compression-results" id="compressionResults" style="display: none;">
                        <h3>Compression Results</h3>
                        <div class="progress-bar">
                            <div class="progress-fill compression-progress"></div>
                        </div>
                        <div class="results-grid" id="compressionGrid"></div>
                        <div class="compression-stats" id="compressionStats"></div>
                    </div>
                </div>
            </div>

            <!-- File Sharing Tab -->
            <div class="tab-content" id="sharing-tab">
                <div class="feature-section">
                    <h2>File Sharing</h2>
                    <div class="sharing-options">
                        <div class="share-method">
                            <h3>Create Share Link</h3>
                            <div class="form-group">
                                <label>Select File:</label>
                                <select id="shareFileSelect">
                                    <option value="">Choose a file...</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Expiry Date:</label>
                                <input type="datetime-local" id="shareExpiry">
                            </div>
                            <div class="form-group">
                                <label>Password (Optional):</label>
                                <input type="password" id="sharePassword" placeholder="Leave empty for no password">
                            </div>
                            <div class="form-group">
                                <label>Permissions:</label>
                                <div class="checkbox-group">
                                    <label><input type="checkbox" value="view" checked> View</label>
                                    <label><input type="checkbox" value="download"> Download</label>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="createShareLink()">
                                <i class="fas fa-link"></i>
                                Create Share Link
                            </button>
                        </div>

                        <div class="share-method">
                            <h3>Share with Users</h3>
                            <div class="form-group">
                                <label>User Email:</label>
                                <input type="email" id="shareUserEmail" placeholder="user@example.com">
                            </div>
                            <div class="form-group">
                                <label>Message:</label>
                                <textarea id="shareMessage" placeholder="Optional message..."></textarea>
                            </div>
                            <button class="btn btn-primary" onclick="shareWithUser()">
                                <i class="fas fa-user-plus"></i>
                                Share with User
                            </button>
                        </div>

                        <div class="share-method">
                            <h3>Share with Admin</h3>
                            <div class="form-group">
                                <label>Support Message:</label>
                                <textarea id="adminMessage" placeholder="Describe your issue or request..."></textarea>
                            </div>
                            <button class="btn btn-warning" onclick="shareWithAdmin()">
                                <i class="fas fa-headset"></i>
                                Share with Support
                            </button>
                        </div>
                    </div>

                    <div class="shared-files-list" id="sharedFilesList">
                        <h3>Your Shared Files</h3>
                        <div class="shared-files-grid" id="sharedFilesGrid"></div>
                    </div>
                </div>
            </div>

            <!-- File Versioning Tab -->
            <div class="tab-content" id="versioning-tab">
                <div class="feature-section">
                    <h2>File Versioning</h2>
                    <div class="versioning-controls">
                        <div class="control-group">
                            <label>Auto Versioning:</label>
                            <label class="switch">
                                <input type="checkbox" id="autoVersioning" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="control-group">
                            <label>Max Versions per File:</label>
                            <input type="number" id="maxVersions" value="10" min="1" max="50">
                        </div>
                    </div>

                    <div class="file-versions" id="fileVersions">
                        <h3>Select File to View Versions</h3>
                        <select id="versionFileSelect" onchange="loadFileVersions()">
                            <option value="">Choose a file...</option>
                        </select>

                        <div class="version-timeline" id="versionTimeline" style="display: none;">
                            <h4>Version History</h4>
                            <div class="timeline-container" id="timelineContainer"></div>
                        </div>

                        <div class="version-actions" id="versionActions" style="display: none;">
                            <button class="btn btn-primary" onclick="compareVersions()">
                                <i class="fas fa-code-compare"></i>
                                Compare Versions
                            </button>
                            <button class="btn btn-success" onclick="restoreVersion()">
                                <i class="fas fa-undo"></i>
                                Restore Selected
                            </button>
                            <button class="btn btn-info" onclick="exportVersionHistory()">
                                <i class="fas fa-download"></i>
                                Export History
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Backup Tab -->
            <div class="tab-content" id="backup-tab">
                <div class="feature-section">
                    <h2>Backup System</h2>
                    <div class="backup-controls">
                        <div class="backup-actions">
                            <button class="btn btn-primary" onclick="createManualBackup()">
                                <i class="fas fa-save"></i>
                                Create Backup Now
                            </button>
                            <button class="btn btn-success" onclick="createIncrementalBackup()">
                                <i class="fas fa-plus-circle"></i>
                                Incremental Backup
                            </button>
                            <button class="btn btn-info" onclick="showBackupSettings()">
                                <i class="fas fa-cog"></i>
                                Schedule Settings
                            </button>
                        </div>

                        <div class="backup-progress" id="backupProgress" style="display: none;">
                            <h4>Backup in Progress</h4>
                            <div class="progress-bar">
                                <div class="progress-fill backup-progress"></div>
                            </div>
                            <p class="backup-status">Initializing...</p>
                        </div>
                    </div>

                    <div class="backup-history" id="backupHistory">
                        <h3>Backup History</h3>
                        <div class="backup-list" id="backupList"></div>
                    </div>

                    <div class="backup-stats" id="backupStats">
                        <h3>Backup Statistics</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <i class="fas fa-database"></i>
                                <div class="stat-info">
                                    <span class="stat-value" id="totalBackups">0</span>
                                    <span class="stat-label">Total Backups</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-check-circle"></i>
                                <div class="stat-info">
                                    <span class="stat-value" id="successfulBackups">0</span>
                                    <span class="stat-label">Successful</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-hdd"></i>
                                <div class="stat-info">
                                    <span class="stat-value" id="backupSize">0 MB</span>
                                    <span class="stat-label">Total Size</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-clock"></i>
                                <div class="stat-info">
                                    <span class="stat-value" id="lastBackup">Never</span>
                                    <span class="stat-label">Last Backup</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CDN Tab -->
            <div class="tab-content" id="cdn-tab">
                <div class="feature-section">
                    <h2>CDN Integration</h2>
                    <div class="cdn-settings">
                        <div class="cdn-providers">
                            <h3>CDN Providers</h3>
                            <div class="provider-list">
                                <div class="provider-card active">
                                    <i class="fas fa-cloud"></i>
                                    <h4>Cloudflare</h4>
                                    <p>Global CDN with edge optimization</p>
                                    <span class="status enabled">Enabled</span>
                                </div>
                                <div class="provider-card">
                                    <i class="fab fa-aws"></i>
                                    <h4>AWS CloudFront</h4>
                                    <p>Amazon's global content delivery network</p>
                                    <span class="status disabled">Disabled</span>
                                </div>
                                <div class="provider-card">
                                    <i class="fas fa-bolt"></i>
                                    <h4>Vercel Edge</h4>
                                    <p>Vercel's edge network</p>
                                    <span class="status enabled">Enabled</span>
                                </div>
                            </div>
                        </div>

                        <div class="cdn-optimization">
                            <h3>Optimization Settings</h3>
                            <div class="optimization-controls">
                                <div class="control-group">
                                    <label>Image Optimization:</label>
                                    <label class="switch">
                                        <input type="checkbox" id="cdnImageOptimization" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="control-group">
                                    <label>Compression:</label>
                                    <label class="switch">
                                        <input type="checkbox" id="cdnCompression" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="control-group">
                                    <label>Lazy Loading:</label>
                                    <label class="switch">
                                        <input type="checkbox" id="cdnLazyLoading" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="control-group">
                                    <label>WebP Conversion:</label>
                                    <label class="switch">
                                        <input type="checkbox" id="cdnWebpConversion" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="cdn-actions">
                            <button class="btn btn-primary" onclick="optimizeAllImages()">
                                <i class="fas fa-magic"></i>
                                Optimize All Images
                            </button>
                            <button class="btn btn-warning" onclick="purgeCDNCache()">
                                <i class="fas fa-trash"></i>
                                Purge Cache
                            </button>
                            <button class="btn btn-info" onclick="preloadCriticalAssets()">
                                <i class="fas fa-rocket"></i>
                                Preload Assets
                            </button>
                        </div>
                    </div>

                    <div class="cdn-stats" id="cdnStats">
                        <h3>CDN Statistics</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <i class="fas fa-globe"></i>
                                <div class="stat-info">
                                    <span class="stat-value" id="cdnProvider">Cloudflare</span>
                                    <span class="stat-label">Active Provider</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-memory"></i>
                                <div class="stat-info">
                                    <span class="stat-value" id="cacheHitRate">85%</span>
                                    <span class="stat-label">Cache Hit Rate</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-image"></i>
                                <div class="stat-info">
                                    <span class="stat-value" id="optimizedImages">0</span>
                                    <span class="stat-label">Optimized Images</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-tachometer-alt"></i>
                                <div class="stat-info">
                                    <span class="stat-value" id="loadTime">1.2s</span>
                                    <span class="stat-label">Avg Load Time</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div class="modal" id="shareModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Share Link Created</h3>
                <button class="close-btn" onclick="closeModal('shareModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="share-link-result">
                    <label>Share URL:</label>
                    <div class="link-container">
                        <input type="text" id="generatedShareLink" readonly>
                        <button class="btn btn-sm" onclick="copyShareLink()">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                    <div class="share-details">
                        <p><strong>Expires:</strong> <span id="shareExpiryDisplay"></span></p>
                        <p><strong>Permissions:</strong> <span id="sharePermissionsDisplay"></span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="versionCompareModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>Version Comparison</h3>
                <button class="close-btn" onclick="closeModal('versionCompareModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="comparison-container" id="comparisonContainer">
                    <!-- Comparison content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="backupSettingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Backup Schedule Settings</h3>
                <button class="close-btn" onclick="closeModal('backupSettingsModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="schedule-settings">
                    <div class="schedule-option">
                        <h4>Daily Backup</h4>
                        <label class="switch">
                            <input type="checkbox" id="dailyBackupEnabled" checked>
                            <span class="slider"></span>
                        </label>
                        <div class="schedule-details">
                            <label>Time:</label>
                            <input type="time" id="dailyBackupTime" value="02:00">
                            <label>Retention (days):</label>
                            <input type="number" id="dailyRetention" value="7" min="1" max="30">
                        </div>
                    </div>
                    <div class="schedule-option">
                        <h4>Weekly Backup</h4>
                        <label class="switch">
                            <input type="checkbox" id="weeklyBackupEnabled" checked>
                            <span class="slider"></span>
                        </label>
                        <div class="schedule-details">
                            <label>Day:</label>
                            <select id="weeklyBackupDay">
                                <option value="sunday" selected>Sunday</option>
                                <option value="monday">Monday</option>
                                <option value="tuesday">Tuesday</option>
                                <option value="wednesday">Wednesday</option>
                                <option value="thursday">Thursday</option>
                                <option value="friday">Friday</option>
                                <option value="saturday">Saturday</option>
                            </select>
                            <label>Retention (weeks):</label>
                            <input type="number" id="weeklyRetention" value="4" min="1" max="12">
                        </div>
                    </div>
                    <div class="schedule-option">
                        <h4>Monthly Backup</h4>
                        <label class="switch">
                            <input type="checkbox" id="monthlyBackupEnabled" checked>
                            <span class="slider"></span>
                        </label>
                        <div class="schedule-details">
                            <label>Date:</label>
                            <input type="number" id="monthlyBackupDate" value="1" min="1" max="28">
                            <label>Retention (months):</label>
                            <input type="number" id="monthlyRetention" value="12" min="1" max="24">
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-primary" onclick="saveBackupSettings()">Save Settings</button>
                    <button class="btn btn-secondary" onclick="closeModal('backupSettingsModal')">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/main.js"></script>
    <script src="js/image-compression.js"></script>
    <script src="js/file-sharing.js"></script>
    <script src="js/backup-system.js"></script>
    <script src="js/cdn-integration.js"></script>
    <script src="js/file-versioning.js"></script>
    <script src="js/advanced-file-manager.js"></script>
</body>
</html>
